---
title: é¢è¯•çœŸé¢˜è®°å½•
date: 2025-6-23
categories:
  - Backend
tags:
  - node
  - interview
  - personal
sidebar: 'auto'
publish: true
sticky: 2
---

### STICKY
[ä»€ä¹ˆæ˜¯ nodejs?](/backend/node/node/#_12-ä»€ä¹ˆæ˜¯nodejs) / 
[nodejs äº‹ä»¶å¾ªç¯æœºåˆ¶](/backend/node/node/#_7-node-js-äº‹ä»¶å¾ªç¯æœºåˆ¶) / 
[nodejs å®ä»»åŠ¡å¾®ä»»åŠ¡](/backend/node/node/#_11-å®ä»»åŠ¡-å¾®ä»»åŠ¡)


## DEEPSIGHT

[æµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯](/backend/node/node/#_3-æµè§ˆå™¨å’Œ-node-ä¸­-äº‹ä»¶å¾ªç¯æœ‰ä»€ä¹ˆåŒºåˆ«)

[VUEå“åº”å¼åŸç†](/frontend/vue/#vueçš„å“åº”å¼åŸç†æ˜¯å¦‚ä½•å®ç°çš„-è¯·æè¿°object-definepropertyå’Œproxyçš„åŒºåˆ«åŠå…¶ä¼˜ç¼ºç‚¹)

---

[70. çˆ¬æ¥¼æ¢¯](/backend/node/leetcode-js/#_70-çˆ¬æ¥¼æ¢¯)

[867. è½¬ç½®çŸ©é˜µ](/backend/node/leetcode-js/#_867-è½¬ç½®çŸ©é˜µ)

## YIKA

- Redis ç¼“å­˜ç»­æœŸé—®é¢˜ï¼ˆè®¡åˆ’ä»»åŠ¡æ—¶é—´å¤§äºè½®è¯¢æ—¶é—´æ—¶ï¼ŒåŒé‡ç¼“å­˜/ç¼“å­˜ç»­æœŸï¼‰

[prismaå’ŒtypeormåŒºåˆ«](/backend/node/node_frame/#orm-çš„é€‰å‹)

- NestJS è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜(forwardRef)

```ts
// module-a.module.ts
@Module({
  imports: [forwardRef(() => ModuleB)],
})
export class ModuleA {}

// module-b.module.ts
@Module({
  imports: [forwardRef(() => ModuleA)],
})
export class ModuleB {}
```

[Nest å®ˆå«ã€æ‹¦æˆªå™¨ã€ä¸­é—´ä»¶ çš„åŒºåˆ«](/backend/node/node_frame/#nest-å®ˆå«ã€æ‹¦æˆªå™¨ã€ä¸­é—´ä»¶-çš„åŒºåˆ«)

[æ‰‹å†™è£…é¥°å™¨](/frontend/interview/#æ‰‹å†™è£…é¥°å™¨)

## SHANGHAI LONGYI
[express å’Œ koa ä¸­é—´ä»¶çš„åŒºåˆ«(çº¿æ€§ / æ´‹è‘±åœˆ)](/backend/node/node/#_1-koa-å’Œ-express-æœ‰å“ªäº›ä¸åŒ)

[Redis åŸºæœ¬æ•°æ®ç±»å‹](/backend/redis/#redis-äº”å¤§æ•°æ®ç±»å‹)

[MySQL å’Œ MongoDB çš„ç´¢å¼•æ•°æ®ç»“æ„](/backend/sql/#mysql-å’Œ-mongodb-çš„ç´¢å¼•æ•°æ®ç»“æ„)

[Bæ ‘ å’Œ B+æ ‘](/backend/sql/#b-tree)

[Docker å¸¸ç”¨çš„ç½‘ç»œæ¨¡å¼æœ‰å“ªäº›?](/backend/docker/#docker-å¸¸ç”¨çš„ç½‘ç»œæ¨¡å¼æœ‰å“ªäº›)

[Nest å®ˆå«ã€æ‹¦æˆªå™¨ã€ä¸­é—´ä»¶ çš„åŒºåˆ«](/backend/node/node_frame/#nest-å®ˆå«ã€æ‹¦æˆªå™¨ã€ä¸­é—´ä»¶-çš„åŒºåˆ«)

---

[ç®—æ³•é¢˜:éé€’å‡æ•°åˆ—](/backend/node/leetcode-js/#_665-éé€’å‡æ•°åˆ—)
[å¾®ä¿¡ç™»é™†æ•°æ®æµå‘](/architecture/#å¾®ä¿¡æ‰«ç ç™»å½•å…¨æµç¨‹-å‰åç«¯æ•°æ®æµå‘)

## StoreHub

[ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿä½¿ç”¨å¾®æœåŠ¡çš„ä¼˜åŠ¿/ç¼ºç‚¹æœ‰å“ªäº›ï¼Ÿ](/architecture/#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E4%BD%BF%E7%94%A8%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E5%8A%BF-%E7%BC%BA%E7%82%B9%E6%9C%89%E5%93%AA%E4%BA%9B)

[Mysql & MongoDB & Redis ä»‹ç»ï¼Œåˆ†åˆ«åœ¨å“ªäº›åœºæ™¯ä¸‹å‘æŒ¥ä¼˜åŠ¿?](/backend/SQL/#mysql-mongodb-redis-ä»‹ç»-åˆ†åˆ«åœ¨å“ªäº›åœºæ™¯ä¸‹å‘æŒ¥ä¼˜åŠ¿)



[æŸ¥æ‰¾ 4 æœˆä»½çš„æ—¥å¿—ï¼ŒåŸºäº name å»é‡](/backend/SQL/#æŸ¥æ‰¾-4-æœˆä»½çš„æ—¥å¿—-åŸºäº-name-å»é‡)



[mongodb ä¸­ç´¢å¼•æœ‰å“ªäº›ç±»å‹ï¼Ÿåˆ†åˆ«æ€ä¹ˆä½¿ç”¨ï¼Ÿ](/backend/mongodb/#mongodb-ä¸­ç´¢å¼•æœ‰å“ªäº›ç±»å‹-åˆ†åˆ«æ€ä¹ˆä½¿ç”¨)
                  

[æŠŠ callback æ”¹å†™æˆ Promise](/frontend/interview/#_16-æŠŠ-callback-æ”¹å†™æˆ-promise)


### ç®—æ³•é¢˜ï¼šæ‹¬å·åŒ¹é… leetcode 20

[ç®—æ³•é¢˜ï¼šæ‹¬å·åŒ¹é… leetcode 20](/backend/node/leetcode-js/#_20-æœ‰æ•ˆçš„æ‹¬å·)

[ç®—æ³•é¢˜ï¼šæœç´¢æ—‹è½¬æ’åºæ•°ç»„ leetcode 33](/backend/node/leetcode-js/#_33-æœç´¢æ—‹è½¬æ’åºæ•°ç»„)

## NGA

[ä»€ä¹ˆæ˜¯ æ§åˆ¶åè½¬ && ä¾èµ–æ³¨å…¥?](/architecture/#ä»€ä¹ˆæ˜¯-æ§åˆ¶åè½¬-ä¾èµ–æ³¨å…¥)


[å¤šå®ä¾‹æƒ…å†µä¸‹ï¼Œæ€ä¹ˆé€šè¿‡ redis é˜²æ­¢å®šæ—¶ä»»åŠ¡å¤šæ¬¡æ‰§è¡Œ](/backend/sql/#å¤šå®ä¾‹æƒ…å†µä¸‹-æ€ä¹ˆé€šè¿‡-redis-é˜²æ­¢å®šæ—¶ä»»åŠ¡å¤šæ¬¡æ‰§è¡Œ)

---

## ShuRui

### 1. Node å’Œ Ajax æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

> Node.js å’Œ Ajax æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚

- Node.js æ˜¯ä¸€ä¸ªåŸºäº JavaScript çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œç”¨äºåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚å®ƒä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ JavaScript ç¼–å†™æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºï¼Œå¹¶æä¾›äº†ä¸€ç³»åˆ—çš„å†…ç½®æ¨¡å—å’Œæ‰©å±•åº“ï¼Œç”¨äºç®€åŒ–æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚

- Ajax æ˜¯ä¸€ç§åŸºäº JavaScript å’Œ XMLï¼ˆæˆ– JSONï¼‰çš„æŠ€æœ¯ï¼Œç”¨äºå®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„å¼‚æ­¥é€šä¿¡ã€‚Ajax å¯ä»¥åœ¨ä¸åˆ·æ–°æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹æ›´æ–°éƒ¨åˆ†é¡µé¢å†…å®¹ï¼Œä»è€Œæé«˜äº†ç½‘ç«™çš„å“åº”é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚Ajax ä¸»è¦æ˜¯åœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„æŠ€æœ¯ï¼Œé€šè¿‡æµè§ˆå™¨å†…ç½®çš„ **XMLHttpRequest** å¯¹è±¡æ¥å®ç°ä¸æœåŠ¡å™¨ç«¯çš„å¼‚æ­¥é€šä¿¡ã€‚

> å› æ­¤ï¼ŒNode.js å’Œ Ajax æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚Node.js ä¸»è¦æ˜¯ç”¨äºåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ï¼Œè€Œ Ajax ä¸»è¦æ˜¯ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´è¿›è¡Œå¼‚æ­¥é€šä¿¡ã€‚


[Node Stream æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ç§ç±»çš„ Streamï¼Ÿ](/backend/node/node/#_10-node-stream-æ˜¯ä»€ä¹ˆ-æœ‰å“ªäº›ç§ç±»çš„-stream)

### 3. fs.readFile() å’Œ fs.createReadStream() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

| åŒºåˆ«     | fs.readFile()          | fs.createReadStream()                    |
| -------- | ---------------------- | ---------------------------------------- |
| è¯»å–åˆ°   | å…¨éƒ¨è¯»å–åˆ°å†…å­˜         | åˆ†æˆä¸€ç³»åˆ—å°å—ï¼ˆç¼“å†²åŒºï¼‰ï¼Œé€å—è¯»å–å’Œå¤„ç† |
| é€‚ç”¨äº   | è¾ƒå°çš„æ–‡ä»¶æˆ–æ•°æ®       | å¤§å‹æ–‡ä»¶æˆ–æ•°æ®é›†                         |
| callback | ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°è¿”å› | é€šè¿‡ç›‘å¬å®Œæˆè¯»å–æ“ä½œ                     |

---

## MiaoDian

[Mysql æŸ¥è¯¢å­¦ç”Ÿä¸‰é—¨ç§‘ç›®æ€»åˆ†æœ€é«˜çš„ å‰ä¸‰å](/backend/sql/#mysql-æŸ¥è¯¢å­¦ç”Ÿä¸‰é—¨ç§‘ç›®æ€»åˆ†æœ€é«˜çš„-å‰ä¸‰å)

## å¿ƒæ‚¦äº’å¨±

### 1. å¦‚ä½•ä½¿ç”¨ nodejs è¯»å–ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ï¼Ÿ

> **fs.readFile** æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå½“æ–‡ä»¶è¯»å–å®Œæˆæ—¶ï¼Œå›è°ƒå‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚è¿™ç§æ–¹å¼é€‚åˆåœ¨éé˜»å¡çš„æƒ…å†µä¸‹æ‰§è¡Œæ–‡ä»¶è¯»å–æ“ä½œï¼Œä¸ä¼šé˜»æ­¢åç»­ä»£ç çš„æ‰§è¡Œã€‚

> **fs.readFileSync** æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œå®ƒä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°æ–‡ä»¶è¯»å–å®Œæˆã€‚è¿™æ„å‘³ç€åœ¨æ–‡ä»¶è¯»å–å®Œæˆä¹‹å‰ï¼Œç¨‹åºæ— æ³•æ‰§è¡Œå…¶ä»–æ“ä½œã€‚å› æ­¤ï¼Œé€šå¸¸ä¸å»ºè®®åœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨åŒæ­¥æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯åœ¨æœåŠ¡å™¨ç«¯åº”ç”¨ä¸­ï¼Œå› ä¸ºå®ƒå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜å’Œé˜»å¡ã€‚

> **fs.promises.readFile** æ˜¯ä¸€ä¸ªå¼‚æ­¥ Promise æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå…è®¸æ‚¨ä½¿ç”¨ async/await æˆ– Promise é“¾å¼è°ƒç”¨æ¥å¤„ç†æ–‡ä»¶è¯»å–æ“ä½œã€‚è¿™ç§æ–¹å¼åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­æ›´åŠ æ–¹ä¾¿å’Œå¯è¯»ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚

### 3. å¦‚ä½•åšåˆ°åˆ›å»º nodejs é›†ç¾¤å¹¶åšåˆ°ä¸ä¸­æ–­é‡å¯ï¼Ÿ

```js
const cluster = require('cluster');
const http = require('http');
const numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  console.log(`ä¸»è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);

  // åˆ›å»ºå­è¿›ç¨‹
  for (let i = 0; i < numCPUs; i++) {
    cluster.fork();
  }

  // ç›‘å¬å­è¿›ç¨‹é€€å‡ºäº‹ä»¶
  cluster.on('exit', (worker, code, signal) => {
    console.log(`å­è¿›ç¨‹ ${worker.process.pid} åœæ­¢è¿è¡Œ`);
    // é‡å¯å­è¿›ç¨‹
    cluster.fork();
  });
} else {
  // åœ¨å­è¿›ç¨‹ä¸­åˆ›å»º HTTP æœåŠ¡å™¨
  http
    .createServer((req, res) => {
      res.writeHead(200);
      res.end('Hello, World!');
    })
    .listen(8000);

  console.log(`å­è¿›ç¨‹ ${process.pid} æ­£åœ¨è¿è¡Œ`);
}
```

### 5. mongo æ‰£å‡åº“å­˜æ—¶å¦‚ä½•ä¿è¯åŸå­ä¸€è‡´æ€§ï¼Ÿ

> è¿™é‡Œä½¿ç”¨ mongoose çš„ç‰ˆæœ¬

```js
const session = await mongoose.startSession();
session.startTransaction();

try {
  // åœ¨ session ä¸­æ‰§è¡Œæ“ä½œ
  await InventoryModel.updateOne({ _id: productId, quantity: { $gte: quantity } }, { $inc: { quantity: -quantity } }, { session });

  await RecordModel.create(
    {
      productId: productId,
      quantity: -quantity,
      timestamp: new Date(),
    },
    { session }
  );

  await session.commitTransaction();
  session.endSession();
} catch (error) {
  await session.abortTransaction();
  session.endSession();
  throw error;
}
```

### 6.è¯·å†™å‡ºç¬¦åˆä¸‹åˆ—è¦æ±‚çš„ mongodb æŸ¥è¯¢è¯­å¥:

> æŸ¥è¯¢è¡¨ user ä¸­ï¼Œname æ˜¯ abcï¼Œä¸” age å¤§äº 30 å²æˆ–å°äºç­‰äº 10 å²çš„æ•°æ®ï¼Œè·³è¿‡ 100 æ¡æ•°æ®ä¹‹åçš„ 50 æ¡æ•°æ®ï¼ŒæŒ‰å¹´é¾„é€†åºæ’åˆ—ï¼Œå¹¶ä»…è¿”å› name å’Œ age ä¸¤ä¸ªå­—æ®µ

```js
const query = await User.find({
  name: 'abc',
  $or: [{ age: { $gt: 30 } }, { age: { $lte: 10 } }],
})
  .skip(100)
  .limit(50)
  .sort({ age: -1 })
  .select('name age');
```

```js
const oprs = [
  {
    $match: {
      name: 'abc',
      $or: [{ age: { $gt: 30 } }, { age: { $lte: 10 } }],
    },
  },
  { $sort: { age: -1 } },
  { $skip: 100 },
  { $limit: 50 },
  { $project: { name: 1, age: 1 } },
];

await User.aggregate(oprs);
```

### 7. å¦‚ä½•ä½¿ç”¨ redis å®ç°ç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿ

> è¦ä½¿ç”¨ Redis å®ç°ç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä½ å¯ä»¥å€ŸåŠ© Redis çš„åˆ—è¡¨æ•°æ®ç»“æ„æ¥å®ç°ã€‚

> ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ Redis æ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼š

> DaoyouLun: å®ç°æ¶ˆæ¯é˜Ÿåˆ—é•¿åº¦ä¸º 5

```js
const Redis = require('ioredis');
const client = new Redis(6379, '127.0.0.1');

async function send(msg) {
  const cur = await client.llen('test_queue');
  console.log(cur); // è®¾ç½®æ¶ˆæ¯é˜Ÿåˆ—ä¸Šé™ä¸º5

  if (cur > 5) {
    console.error('size more than 5');
    return;
  }
  await client.lpush('test_queue', msg);
}

async function poll() {
  try {
    const message = await client.rpop('test_queue');
    if (message) {
      console.debug(message);
    }
  } catch (err) {
    console.error(err);
  }

  process.nextTick(poll);
}

poll();

async function main() {
  await send('111');
  await send('222');
  await send('333');
  await send('444');
  await send('555');
  await send('666');
}

main();
```

### 8.ç”¨ redis å®ç°ä¸€ä¸ªåˆ†æ•°æ’è¡Œæ¦œï¼Œå¹¶ä»ä¸­æŸ¥æ‰¾å‰ååçš„æ•°æ®

```bash
zadd leaderboard 100 PlayerA
zadd leaderboard 80 PlayerB
zadd leaderboard 120 PlayerC
zrevrange leaderboard 0 9 WITHSCORES
```

```js
const redis = require('ioredis');
const client = redis.createClient();

// æ·»åŠ æˆå‘˜å’Œåˆ†æ•°åˆ°æ’è¡Œæ¦œ
function addMemberToLeaderboard(member, score) {
  client.zadd('leaderboard', score, member, (err, reply) => {
    if (err) {
      console.error('Failed to add member to leaderboard:', err);
    } else {
      console.log('Member added to leaderboard:', member);
    }
  });
}

// è·å–æ’è¡Œæ¦œå‰ååçš„æ•°æ®
function getTopTenFromLeaderboard() {
  client.zrevrange('leaderboard', 0, 9, 'WITHSCORES', (err, results) => {
    if (err) {
      console.error('Failed to get top ten from leaderboard:', err);
    } else {
      console.debug(results);
      // [
      //     'PlayerL', '123',     'PlayerI',
      //     '122',     'PlayerF', '121',
      //     'PlayerC', '120',     'PlayerJ',
      //     '103',     'PlayerG', '102',
      //     'PlayerD', '101',     'PlayerA',
      //     '100',     'PlayerK', '83',
      //     'PlayerH', '82'
      //   ]
      console.log('Top ten from leaderboard:');
      for (let i = 0; i < results.length; i += 2) {
        const member = results[i];
        const score = results[i + 1];
        console.log(`${i / 2 + 1}. Member: ${member}, Score: ${score}`);
      }
    }
  });
}

// ç¤ºä¾‹æ·»åŠ æˆå‘˜å’Œåˆ†æ•°åˆ°æ’è¡Œæ¦œ
addMemberToLeaderboard('PlayerA', 100);
addMemberToLeaderboard('PlayerB', 80);
addMemberToLeaderboard('PlayerC', 120);

addMemberToLeaderboard('PlayerD', 101);
addMemberToLeaderboard('PlayerE', 81);
addMemberToLeaderboard('PlayerF', 121);

addMemberToLeaderboard('PlayerG', 102);
addMemberToLeaderboard('PlayerH', 82);
addMemberToLeaderboard('PlayerI', 122);

addMemberToLeaderboard('PlayerJ', 103);
addMemberToLeaderboard('PlayerK', 83);
addMemberToLeaderboard('PlayerL', 123);

// æŸ¥è¯¢æ’è¡Œæ¦œå‰ååçš„æ•°æ®
getTopTenFromLeaderboard();
```

### 9.å’Œä»–äººåœ¨åŒä¸€ä¸ª git åˆ†æ”¯å¼€å‘ï¼Œåœ¨æœ¬åœ°å¼€å‘å¥½ä¸€ä¸ªåŠŸèƒ½åï¼Œå¦‚ä½•æäº¤å¹¶ä¸Šä¼ æœåŠ¡å™¨å¯ä»¥å°½å¯èƒ½çš„å‡å°‘å†²çªå¹¶ä¿ç•™å®Œæ•´æäº¤å†å²ï¼Œåˆ—ä¸¾ä½¿ç”¨çš„å‘½ä»¤æˆ–æ“ä½œ

```bash
git stash # ä¿å­˜å½“å‰å·¥ä½œåŒº
git pull # æ‹‰å–è¿œç¨‹åˆ†æ”¯
git stash apply # æ¢å¤å·¥ä½œåŒº
git add . # æ·»åŠ ä¿®æ”¹
git commit -m 'xxx' # æäº¤ä¿®æ”¹
git push # æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯
```

### 10.åˆ—ä¸¾ js ä¸­æ•°ç»„éå†ç›¸å…³çš„æ–¹æ³•

1. for å¾ªç¯

```javascript
const array = [1, 2, 3, 4, 5];
for (let i = 0; i < array.length; i++) {
  console.log(array[i]);
}
```

2. for...of å¾ªç¯ï¼šç”¨äºéå†å¯è¿­ä»£å¯¹è±¡ï¼Œä¾‹å¦‚æ•°ç»„ã€å­—ç¬¦ä¸²ç­‰ã€‚

```javascript
const array = [1, 2, 3, 4, 5];
for (const item of array) {
  console.log(item);
}
```

3. forEach æ–¹æ³•ï¼š

```javascript
const array = [1, 2, 3, 4, 5];
array.forEach((item) => {
  console.log(item);
});
```

4. map æ–¹æ³•ï¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«å¯¹åŸå§‹æ•°ç»„æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†åçš„ç»“æœã€‚

```javascript
const array = [1, 2, 3, 4, 5];
const newArray1 = array.map((item) => item * 2);
console.log(newArray);
```

5. filter æ–¹æ³•ï¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„åŸå§‹æ•°ç»„å…ƒç´ ã€‚

```javascript
const array = [1, 2, 3, 4, 5];
const newArray2 = array.filter((item) => item > 2);
console.log(newArray);
```

6. reduce æ–¹æ³•ï¼šé€šè¿‡å¯¹åŸå§‹æ•°ç»„çš„ç´¯ç§¯è®¡ç®—ï¼Œè¿”å›ä¸€ä¸ªå•ä¸€çš„å€¼ã€‚

> å›è°ƒå‡½æ•°ï¼ˆcallback functionï¼‰ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†æ•°ç»„å…ƒç´ çš„å‡½æ•°ï¼Œå®ƒæ¥å—å››ä¸ªå‚æ•°ï¼šç´¯åŠ å™¨ï¼ˆaccumulatorï¼‰ã€å½“å‰å€¼ï¼ˆcurrent valueï¼‰ã€å½“å‰ç´¢å¼•ï¼ˆcurrent indexï¼‰å’ŒåŸå§‹æ•°ç»„ï¼ˆarrayï¼‰ã€‚å›è°ƒå‡½æ•°åœ¨æ¯ä¸ªæ•°ç»„å…ƒç´ ä¸Šè¢«è°ƒç”¨ï¼Œå¯ä»¥æ‰§è¡Œä»»æ„æ“ä½œå¹¶è¿”å›ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼å°†ä½œä¸ºä¸‹ä¸€æ¬¡è¿­ä»£çš„ç´¯åŠ å™¨çš„å€¼

> åˆå§‹ç´¯åŠ å™¨çš„å€¼ï¼ˆinitial accumulator valueï¼‰ï¼šè¿™æ˜¯å¯é€‰çš„å‚æ•°ï¼ŒæŒ‡å®šåˆå§‹çš„ç´¯åŠ å™¨çš„å€¼ã€‚å¦‚æœæœªæä¾›è¯¥å‚æ•°ï¼Œåˆ™å°†ä½¿ç”¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåˆå§‹ç´¯åŠ å™¨çš„å€¼ï¼Œå¹¶ä»æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹è¿­ä»£ã€‚

```javascript
const array = [1, 2, 3, 4, 5];
const sum = array.reduce((accumulator, currentValue) => accumulator + currentValue);
console.log(sum);
```

### 11.åˆ—ä¸¾å‡ ä¸ª es6 ä»¥åçš„æ–°ç‰¹æ€§

1. å—çº§ä½œç”¨åŸŸï¼ˆBlock Scopeï¼‰ï¼šé€šè¿‡ä½¿ç”¨ let å’Œ const å…³é”®å­—ï¼Œå¼•å…¥äº†å—çº§ä½œç”¨åŸŸï¼Œä½¿å¾—å˜é‡å’Œå¸¸é‡çš„ä½œç”¨åŸŸä»…é™äºå®šä¹‰å®ƒä»¬çš„å—å†…éƒ¨ã€‚

2. ç®­å¤´å‡½æ•°ï¼ˆArrow Functionsï¼‰ï¼šä½¿ç”¨ => è¯­æ³•å®šä¹‰å‡½æ•°ï¼Œå¯ä»¥æ›´ç®€æ´åœ°ç¼–å†™å‡½æ•°è¡¨è¾¾å¼ï¼Œå¹¶è‡ªåŠ¨ç»‘å®šå‡½æ•°ä½“å†…çš„ this å€¼ã€‚

3. è§£æ„èµ‹å€¼ï¼ˆDestructuring Assignmentï¼‰ï¼šå¯ä»¥ä»æ•°ç»„æˆ–å¯¹è±¡ä¸­å¿«é€Ÿæå–å€¼ï¼Œå¹¶å°†å®ƒä»¬åˆ†é…ç»™å˜é‡ï¼Œä»¥ä¾¿è¿›è¡Œæ›´æ–¹ä¾¿çš„èµ‹å€¼æ“ä½œã€‚

4. é»˜è®¤å‚æ•°ï¼ˆDefault Parametersï¼‰ï¼šåœ¨å‡½æ•°å®šä¹‰ä¸­ï¼Œå¯ä»¥ä¸ºå‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå½“è°ƒç”¨å‡½æ•°æ—¶æ²¡æœ‰æä¾›è¯¥å‚æ•°æ—¶ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼ã€‚

5. æ¨¡æ¿å­—é¢é‡ï¼ˆTemplate Literalsï¼‰ï¼šä½¿ç”¨åå¼•å· åŒ…å›´çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒ…å«å˜é‡ã€è¡¨è¾¾å¼å’Œæ¢è¡Œç¬¦ï¼Œå¹¶ä½¿ç”¨ ${} è¯­æ³•è¿›è¡Œæ’å€¼ã€‚

6. æ‰©å±•è¿ç®—ç¬¦ï¼ˆSpread Operatorï¼‰ï¼šé€šè¿‡ä½¿ç”¨ ... è¯­æ³•ï¼Œå¯ä»¥å°†æ•°ç»„æˆ–å¯¹è±¡åœ¨å‡½æ•°è°ƒç”¨ã€æ•°ç»„å­—é¢é‡æˆ–å¯¹è±¡å­—é¢é‡ä¸­å±•å¼€ï¼Œä½¿å…¶å…ƒç´ æˆ–å±æ€§è¢«æ‹†åˆ†æˆç‹¬ç«‹çš„é¡¹ã€‚

7. ç±»å’Œæ¨¡å—ï¼ˆClasses and Modulesï¼‰ï¼šå¼•å…¥äº†ç±»å’Œæ¨¡å—çš„æ¦‚å¿µï¼Œå¯ä»¥æ›´ç®€æ´åœ°å®šä¹‰å’Œç»„ç»‡å¯¹è±¡çš„è¡Œä¸ºå’Œç»“æ„ã€‚

8. async/awaitï¼ˆPromisesï¼‰ï¼šå¼•å…¥äº† Promise å¯¹è±¡ï¼Œç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œï¼Œä½¿å¾—å¼‚æ­¥ä»£ç æ›´æ˜“äºç¼–å†™å’Œç®¡ç†ã€‚

9. for...of å¾ªç¯ï¼ˆFor...of Loopï¼‰ï¼šæä¾›äº†ä¸€ç§ç®€å•çš„éå†æ•°ç»„ã€å­—ç¬¦ä¸²å’Œå…¶ä»–å¯è¿­ä»£å¯¹è±¡çš„æ–¹å¼ã€‚

10 æ¨¡å—åŒ–å¯¼å…¥å’Œå¯¼å‡ºï¼ˆModule Import and Exportï¼‰ï¼šé€šè¿‡ import å’Œ export å…³é”®å­—ï¼Œæ”¯æŒæ¨¡å—åŒ–çš„æ–‡ä»¶å¯¼å…¥å’Œå¯¼å‡ºï¼Œæ–¹ä¾¿ä»£ç çš„ç»„ç»‡å’Œå¤ç”¨ã€‚

### 12.å°†ä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ åˆå¹¶å¹¶å»é‡

```js
const array1 = [1, 2, 3];
const array2 = [2, 3, 4];

// å°†ä¸¤ä¸ªæ•°ç»„åˆå¹¶
const mergedArray = [...array1, ...array2];

// å»é‡
const uniqueArray = [...new Set(mergedArray)];

console.log(uniqueArray);
```

### 13.åˆ—ä¸¾å‡ ä¸ªå¤„ç†å¼‚æ­¥è¯·æ±‚åµŒå¥—çš„æ–¹æ³•

```js
// åµŒå¥—å›è°ƒå‡½æ•°å¤„ç†å¼‚æ­¥è¯·æ±‚
asyncRequest1((err, res) => {
  asyncRequest2(() => {
    asyncRequest3(() => {
      console.log('All requests completed.');
    });
  });
});

function asyncRequest3() {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      console.log('Async Request 3 Completed');
      resolve();
    }, 1000);
  });
}

// ä½¿ç”¨ Promise é“¾å¼è°ƒç”¨å¤„ç†å¼‚æ­¥è¯·æ±‚
asyncRequest1()
  .then(() => asyncRequest2())
  .then(() => asyncRequest3())
  .then(() => {
    console.log('All requests completed.');
  });

// ä½¿ç”¨ async/await å¤„ç†å¼‚æ­¥è¯·æ±‚
async function nestedAsyncRequests() {
  await asyncRequest1();
  await asyncRequest2();
  await asyncRequest3();

  console.log('All requests completed.');
}

// ä½¿ç”¨ Promise.all å¹¶è¡Œå¤„ç†å¼‚æ­¥è¯·æ±‚
Promise.all([asyncRequest1(), asyncRequest2(), asyncRequest3()]).then((results) => {
  console.log('All requests completed.');
  console.log('Results:', results);
});
```

### 14. ç”¨ ts å®ç°å¤šæ€ï¼Œçˆ¶ç±» animalï¼Œå­ç±» cat å’Œ dogï¼ŒåŒ…å« name å±æ€§ï¼Œå®ç° say æ–¹æ³•

```ts
class Animal {
  name: string;

  constructor(name: string) {
    this.name = name;
  }

  say(): void {
    console.log('Animal says...');
  }
}

class Cat extends Animal {
  say(): void {
    console.log('Meow!');
  }
}

class Dog extends Animal {
  say(): void {
    console.log('Woof!');
  }
}

// å¤šæ€æ€§çš„åº”ç”¨
const animals: Animal[] = [new Cat('Tom'), new Dog('Max'), new Cat('Kitty')];

animals.forEach((animal) => {
  console.log(`Name: ${animal.name}`);
  animal.say();
  console.log('------------------');
});

// yarn add global ts-node typescript
// npx ts-node test.ts
```

### 15.å¦‚ä½•ä¸ä½¿ç”¨ç¬¬ä¸‰ä¸ªå˜é‡æ¥äº¤æ¢ä¸¤ä¸ªæ•°çš„å€¼?

```js
let a = 10;
let b = 5;

a = a + b; // å°† a çš„å€¼ä¸ b ç›¸åŠ ï¼Œç»“æœèµ‹ç»™ a
b = a - b; // ç”¨æ–°çš„ a å€¼å‡å»åŸå§‹çš„ b å€¼ï¼Œç»“æœèµ‹ç»™ b
a = a - b; // ç”¨æ–°çš„ a å€¼å‡å»æ–°çš„ b å€¼ï¼Œç»“æœèµ‹ç»™ a

console.log(a); // è¾“å‡º 5
console.log(b); // è¾“å‡º 10
```

```js
let a = 10;
let b = 5;

a = a ^ b; // å¯¹ a å’Œ b è¿›è¡Œä½å¼‚æˆ–æ“ä½œï¼Œç»“æœèµ‹ç»™ a
b = a ^ b; // ç”¨æ–°çš„ a å€¼ä¸åŸå§‹çš„ b å€¼è¿›è¡Œä½å¼‚æˆ–æ“ä½œï¼Œç»“æœèµ‹ç»™ b
a = a ^ b; // ç”¨æ–°çš„ a å€¼ä¸æ–°çš„ b å€¼è¿›è¡Œä½å¼‚æˆ–æ“ä½œï¼Œç»“æœèµ‹ç»™ a

console.log(a); // è¾“å‡º 5
console.log(b); // è¾“å‡º 10
```


### 17.ç°æœ‰ 1000 ä¸ªè‹¹æœï¼Œ10 ä¸ªç›’å­ï¼Œé—®å„ä¸ªç›’å­å†…åº”è¯¥åˆ†åˆ«æ”¾å…¥å¤šå°‘ä¸ªè‹¹æœï¼Œæ‰èƒ½ä½¿å¾—ç”¨æˆ·è¦ä¹°ä»»æ„ 1 è‡³ 1000 ä¹‹é—´çš„ä¸€ä¸ªè‹¹æœæ•°ï¼Œéƒ½å¯ä»¥ç»™ä»–

> (å–çš„æ—¶å€™æ˜¯æ•´ä¸ªç›’å­å–ï¼Œä¸èƒ½æ‹†ç›’å­çš„åŒ…è£…)ã€‚

```js
ç›’å­1ï¼ˆç¬¬1ä½ï¼‰æ”¾å…¥1ä¸ªè‹¹æœã€‚
ç›’å­2ï¼ˆç¬¬2ä½ï¼‰æ”¾å…¥2ä¸ªè‹¹æœã€‚
ç›’å­3ï¼ˆç¬¬3ä½ï¼‰æ”¾å…¥4ä¸ªè‹¹æœã€‚
ç›’å­4ï¼ˆç¬¬4ä½ï¼‰æ”¾å…¥8ä¸ªè‹¹æœã€‚
ç›’å­5ï¼ˆç¬¬5ä½ï¼‰æ”¾å…¥16ä¸ªè‹¹æœã€‚
ç›’å­6ï¼ˆç¬¬6ä½ï¼‰æ”¾å…¥32ä¸ªè‹¹æœã€‚
ç›’å­7ï¼ˆç¬¬7ä½ï¼‰æ”¾å…¥64ä¸ªè‹¹æœã€‚
ç›’å­8ï¼ˆç¬¬8ä½ï¼‰æ”¾å…¥128ä¸ªè‹¹æœã€‚
ç›’å­9ï¼ˆç¬¬9ä½ï¼‰æ”¾å…¥256ä¸ªè‹¹æœã€‚
ç›’å­10ï¼ˆç¬¬10ä½ï¼‰æ”¾å…¥475ä¸ªè‹¹æœï¼ˆå‰©ä½™çš„è‹¹æœæ•°é‡ï¼‰ã€‚
```

---

## KeLuoDa

### 2. node è®¾ç½®ä½¿ç”¨å†…å­˜å¤§å°

> é»˜è®¤ä¸º 4GBï¼Œä¸åŒæœºå™¨å¯èƒ½æœ‰ä¸åŒ

```bash
node --max-old-space-size=2048 your-app.js
```

### 3. å¦‚ä½•é¢„é˜² XSS æ”»å‡»ï¼Ÿ

> ğŸ‘€ é¢„é˜²è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰æ˜¯æ„å»ºå®‰å…¨ web åº”ç”¨ç¨‹åºçš„é‡è¦ä¸€ç¯ã€‚XSS æ”»å‡»çš„ç›®æ ‡æ˜¯å‘ç½‘é¡µæ³¨å…¥æ¶æ„è„šæœ¬ï¼Œä»¥ä¾¿æ”»å‡»è€…å¯ä»¥çªƒå–ç”¨æˆ·çš„ä¿¡æ¯æˆ–æ‰§è¡Œæ¶æ„æ“ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€äº›é˜²æ­¢ XSS æ”»å‡»çš„æœ€ä½³å®è·µï¼š

1. è¾“å…¥éªŒè¯å’Œè¿‡æ»¤ï¼š

å¯¹äºæ‰€æœ‰ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼ŒåŒ…æ‹¬è¡¨å•è¾“å…¥ã€URL å‚æ•°å’Œ cookieï¼Œéƒ½è¦è¿›è¡ŒéªŒè¯å’Œè¿‡æ»¤ã€‚åªå…è®¸é¢„æœŸçš„ã€åˆæ³•çš„å­—ç¬¦å’Œæ•°æ®é€šè¿‡ã€‚

2. è½¬ä¹‰è¾“å‡º
   åœ¨å°†ç”¨æˆ·è¾“å…¥æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šä¹‹å‰ï¼Œç¡®ä¿å¯¹å…¶è¿›è¡Œé€‚å½“çš„è½¬ä¹‰ã€‚è¿™å¯ä»¥é€šè¿‡ç¼–ç¨‹è¯­è¨€çš„å†…ç½®å‡½æ•°æˆ–æ¨¡æ¿å¼•æ“æ¥å®Œæˆï¼Œä»¥ç¡®ä¿ä»»ä½•ç”¨æˆ·è¾“å…¥éƒ½ä¸ä¼šè¢«è§£é‡Šä¸ºä»£ç ã€‚ä½¿ç”¨å®‰å…¨çš„ HTMLã€CSS å’Œ JavaScript è¾“å‡ºç¼–ç æ–¹æ³•ï¼Œ

```js
å¦‚ htmlspecialchars()ã€encodeURIComponent(),md5() ç­‰ã€‚
```

3. å†…å®¹å®‰å…¨ç­–ç•¥ (CSP)ï¼š
   é…ç½® CSP å¤´ï¼Œé™åˆ¶æµè§ˆå™¨åŠ è½½å’Œæ‰§è¡Œçš„å†…å®¹ã€‚CSP å¯ä»¥é˜»æ­¢å†…è”è„šæœ¬å’Œå…¶ä»–ä¸å—ä¿¡ä»»çš„å†…å®¹ï¼Œå‡å°‘ XSS æ”»å‡»çš„é£é™©ã€‚
   åœ¨ HTTP å¤´ä¸­åŒ…å« Content-Security-Policy æ¥å¯ç”¨ CSPã€‚

```js
Content-Security-Policy: same-origin // åªå…è®¸åŠ è½½åŒæºçš„èµ„æº
Content-Security-Policy: default-src 'self' www.example.com // åªå…è®¸åŠ è½½åŒæºçš„èµ„æºå’Œ www.example.com åŸŸåä¸‹çš„èµ„æº
Content-Security-Policy: script-src 'none'
```

### 4. http å’Œ https çš„åŒºåˆ«ï¼Ÿè¯ä¹¦è®¤è¯è¿‡ç¨‹ï¼Ÿpkiï¼Ÿ

|          | http | https |
| -------- | ---- | ----- |
| ä¼ è¾“åè®® | æ˜æ–‡ | åŠ å¯†  |
| é»˜è®¤ç«¯å£ | 80   | 443   |
| è¯ä¹¦     | æ—    | æœ‰    |

HTTPS è¯ä¹¦è®¤è¯è¿‡ç¨‹:

1. æœåŠ¡å™¨ç«¯è¯ä¹¦ç”Ÿæˆ:
   æœåŠ¡å™¨ç®¡ç†å‘˜ç”Ÿæˆä¸€ä¸ªè¯ä¹¦è¯·æ±‚ï¼ˆCSRï¼‰ï¼Œå…¶ä¸­åŒ…å«æœåŠ¡å™¨çš„å…¬é’¥ã€‚
   è¯ä¹¦è¯·æ±‚è¢«å‘é€åˆ°å—ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ã€‚

2. è¯ä¹¦é¢å‘æœºæ„è®¤è¯:
   CA éªŒè¯è¯ä¹¦è¯·æ±‚çš„åˆæ³•æ€§ï¼Œå¹¶éªŒè¯æœåŠ¡å™¨æ‰€æœ‰è€…çš„èº«ä»½ã€‚
   CA ç­¾å‘åŒ…å«æœåŠ¡å™¨å…¬é’¥çš„æ•°å­—è¯ä¹¦ï¼Œå¹¶ä½¿ç”¨ CA çš„ç§é’¥è¿›è¡Œç­¾åã€‚

3. æœåŠ¡å™¨é…ç½®è¯ä¹¦:
   æœåŠ¡å™¨æ”¶åˆ° CA ç­¾å‘çš„è¯ä¹¦åï¼Œå°†å…¶é…ç½®åˆ°æœåŠ¡å™¨ä¸Šã€‚

4. å®¢æˆ·ç«¯éªŒè¯:
   å½“å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›è¯ä¹¦ã€‚
   å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¼šéªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ï¼ŒåŒ…æ‹¬æ£€æŸ¥ CA çš„ç­¾åå’Œè¯ä¹¦æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ã€‚
   å¦‚æœè¯ä¹¦æœ‰æ•ˆï¼Œå®¢æˆ·ç«¯ä¼šç”Ÿæˆä¸€ä¸ªéšæœºçš„å¯¹ç§°å¯†é’¥ï¼Œç„¶åä½¿ç”¨æœåŠ¡å™¨çš„å…¬é’¥åŠ å¯†å®ƒï¼Œå¹¶å°†å…¶å‘é€å›æœåŠ¡å™¨ã€‚
   å»ºç«‹å®‰å…¨é€šä¿¡:

::: tip
æœåŠ¡å™¨ä½¿ç”¨å…¶ç§é’¥è§£å¯†å®¢æˆ·ç«¯å‘é€çš„éšæœºå¯†é’¥ã€‚
ä»æ­¤åˆ»èµ·ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡éƒ½ä½¿ç”¨è¿™ä¸ªå…±äº«çš„å¯¹ç§°å¯†é’¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚
:::

#### å…¬é’¥åŸºç¡€è®¾æ–½ï¼ˆPKIï¼‰:

- PKI æ˜¯ä¸€ç§å¹¿æ³›ç”¨äºåŠ å¯†å’Œè®¤è¯çš„ä½“ç³»ç»“æ„ã€‚å®ƒåŒ…æ‹¬è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰å’Œæ•°å­—è¯ä¹¦ï¼Œç”¨äºç¡®ä¿å®‰å…¨é€šä¿¡ã€‚PKI çš„åŸºæœ¬åŸç†æ˜¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ï¼Œå…¶ä¸­æ¯ä¸ªå®ä½“ï¼ˆå¦‚æœåŠ¡å™¨æˆ–ç”¨æˆ·ï¼‰éƒ½æœ‰ä¸€å¯¹å…¬é’¥å’Œç§é’¥ã€‚ç§é’¥æ˜¯ä¿å¯†çš„ï¼Œè€Œå…¬é’¥å¯ä»¥å…¬å¼€ä½¿ç”¨ã€‚CA é¢å‘æ•°å­—è¯ä¹¦ï¼Œç”¨äºéªŒè¯å…¬é’¥çš„çœŸå®æ€§å’Œèº«ä»½ã€‚

- åœ¨ HTTPS ä¸­ï¼ŒPKI ç”¨äºç¡®ä¿æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¹¶ååŠ©åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹åŠ å¯†é€šä¿¡ã€‚é€šè¿‡ CA é¢å‘çš„æ•°å­—è¯ä¹¦ï¼Œå®¢æˆ·ç«¯å¯ä»¥éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œä»è€Œç¡®ä¿å®ƒæ­£åœ¨ä¸é¢„æœŸçš„å®‰å…¨æœåŠ¡å™¨é€šä¿¡ã€‚

> æ€»ä¹‹ï¼ŒHTTP æ˜¯ä¸€ç§ä¸å®‰å…¨çš„åè®®ï¼Œè€Œ HTTPS ä½¿ç”¨åŠ å¯†å’Œæ•°å­—è¯ä¹¦æ¥ä¿æŠ¤é€šä¿¡çš„å®‰å…¨æ€§å’ŒçœŸå®æ€§ã€‚ PKI æ˜¯ HTTPS çš„åŸºç¡€ï¼Œç”¨äºéªŒè¯å’ŒåŠ å¯†é€šä¿¡ã€‚

### 5. ä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹æ˜¯å¦å…±äº«å†…å­˜ï¼Ÿ

> åœ¨ Node.js ä¸­ï¼Œä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹ä¹‹é—´**ä¸å…±äº«å†…å­˜**ã€‚ä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå®ƒä»¬æ‹¥æœ‰è‡ªå·±çš„ç‹¬ç«‹å†…å­˜ç©ºé—´ã€‚è¿™æ˜¯æ“ä½œç³»ç»Ÿçº§åˆ«çš„åˆ†ç¦»ã€‚

å½“ä½ åœ¨ Node.js ä¸­åˆ›å»ºå­è¿›ç¨‹æ—¶ï¼Œæ¯ä¸ªå­è¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ JavaScript æ‰§è¡Œç¯å¢ƒå’Œå†…å­˜ç©ºé—´ã€‚è¿™æ„å‘³ç€ä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹ä¹‹é—´ä¸èƒ½ç›´æ¥å…±äº«å˜é‡æˆ–æ•°æ®ï¼Œé™¤éä½ æ˜ç¡®åœ°ä½¿ç”¨è¿›ç¨‹é—´é€šä¿¡ï¼ˆInter-Process Communicationï¼ŒIPCï¼‰æœºåˆ¶æ¥å®ç°æ•°æ®ä¼ é€’ï¼Œä¾‹å¦‚ä½¿ç”¨ `child_process` æ¨¡å—çš„ `send()` å’Œ `on('message')` æ–¹æ³•ã€‚

## ZStack

[1. Node.js äº‹ä»¶å¾ªç¯æœºåˆ¶](/backend/node/node/#_7-node-js-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6)

[2. useMemo / useCallback / useEffect ä¸‰è€…åŒºåˆ«](/frontend/react/#_1-react-ä¸­-usememo-usecallback-useeffect-ä¸‰è€…åŒºåˆ«)

#### 3. ä»€ä¹ˆæ˜¯ $facet

> `$facet` æ˜¯ MongoDB èšåˆç®¡é“ï¼ˆaggregation pipelineï¼‰ä¸­çš„ä¸€ä¸ªé˜¶æ®µï¼Œå®ƒå…è®¸ä½ åœ¨ä¸€ä¸ªèšåˆç®¡é“ä¸­æ‰§è¡Œå¤šä¸ªç‹¬ç«‹çš„å­èšåˆï¼Œå¹¶å°†å®ƒä»¬çš„ç»“æœæ•´åˆåˆ°ä¸€ä¸ªå•ä¸€çš„æ–‡æ¡£ä¸­ã€‚

```json
{
  $facet: {
    "outputField1": [ <stage1>, <stage2>, ... ],
    "outputField2": [ <stage3>, <stage4>, ... ],
    // æ›´å¤šè¾“å‡ºå­—æ®µå’Œå­èšåˆé˜¶æ®µ
  }
}

```

```json
{
    $facet: {
      "salesByAgent": [
        { $sort: { totalSales: -1 } },
        { $limit: 5 }
      ],
      "totalSales": [
        { $group: { _id: null, total: { $sum: "$totalSales" } } }
      ]
    }
  }
```

## DAOYOUYUN

### 1. ä»€ä¹ˆæ˜¯ node.js

- Node.js æ˜¯ä¸€ä¸ªå¼€æºçš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚å®ƒæ˜¯å»ºç«‹åœ¨`Chrome V8` JavaScript å¼•æ“ä¹‹ä¸Šçš„ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ç³»åˆ—çš„åº“å’Œå·¥å…·ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°æ„å»ºé«˜æ€§èƒ½çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚

- å…³é”®è¯ `äº‹ä»¶é©±åŠ¨` `éé˜»å¡I/Oæ¨¡å‹` `è½»é‡` `é«˜æ€§èƒ½` `è·¨å¹³å°`

### [2. Node.js äº‹ä»¶å¾ªç¯æœºåˆ¶](/backend/node/node/#_7-node-js-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6)

### [3. å®ä»»åŠ¡ / å¾®ä»»åŠ¡](/backend/node/node/#_11-å®ä»»åŠ¡-å¾®ä»»åŠ¡)

### 4. èŒƒå‹

> æ³›å‹æä¾›äº†ä¸€ç§æŠ½è±¡çš„æ–¹å¼ï¼Œå…è®¸ä½ åœ¨ä¸çŸ¥é“å…·ä½“æ•°æ®ç±»å‹çš„æƒ…å†µä¸‹ç¼–å†™é€šç”¨çš„ç®—æ³•ã€æ•°æ®ç»“æ„æˆ–å‡½æ•°ï¼Œä»¥é€‚ç”¨äºä¸åŒçš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¿æŒç±»å‹å®‰å…¨

```ts
function identity<T>(value: T): T {
  return value;
}

let result = identity('Hello, TypeScript'); // resultçš„ç±»å‹ä¸ºstring
```

### 5. é˜²æŠ– / èŠ‚æµ

> é˜²æŠ–ï¼ˆDebouncingï¼‰å’ŒèŠ‚æµï¼ˆThrottlingï¼‰æ˜¯ä¸¤ç§ç”¨äºæ§åˆ¶å‡½æ•°è°ƒç”¨é¢‘ç‡çš„å¸¸è§æŠ€æœ¯ï¼Œå®ƒä»¬é€šå¸¸ç”¨äºå¤„ç†ç”¨æˆ·è¾“å…¥ã€æµè§ˆå™¨äº‹ä»¶æˆ–å…¶ä»–éœ€è¦é™åˆ¶è§¦å‘é¢‘ç‡çš„åœºæ™¯ã€‚Node.js ä¸­ä¹Ÿå¯ä»¥åº”ç”¨è¿™äº›æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯åœ¨æ„å»ºåç«¯åº”ç”¨ç¨‹åºä¸­çš„ä¸€äº›ç‰¹å®šæƒ…å†µä¸‹ã€‚

#### é˜²æŠ–ï¼ˆDebouncingï¼‰ï¼š

> é˜²æŠ–æŠ€æœ¯ç¡®ä¿åœ¨ä¸€å®šæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚å¦‚æœåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å†æ¬¡è§¦å‘å‡½æ•°ï¼Œè®¡æ—¶å™¨å°†è¢«é‡ç½®ï¼Œç›´åˆ°æ²¡æœ‰æ–°çš„è§¦å‘äº‹ä»¶ã€‚é˜²æŠ–é€šå¸¸ç”¨äºå¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œä»¥é¿å…åœ¨ç”¨æˆ·æŒç»­è¾“å…¥æ—¶é¢‘ç¹è§¦å‘å‡½æ•°ã€‚

ç¤ºä¾‹ï¼ˆä½¿ç”¨ Node.js çš„ setTimeout å‡½æ•°å®ç°é˜²æŠ–ï¼‰ï¼š

```js
function debounce(func, delay) {
  let timer;
  return function (...args) {
    clearTimeout(timer);
    timer = setTimeout(() => {
      func.apply(this, args);
    }, delay);
  };
}

const debouncedFunction = debounce(() => {
  console.log('Debounced function called');
}, 1000);

// è°ƒç”¨debouncedFunctionï¼Œä½†åªæœ‰åœ¨1ç§’å†…æ²¡æœ‰æ›´å¤šçš„è°ƒç”¨æ—¶æ‰ä¼šå®é™…æ‰§è¡Œ
debouncedFunction();
```

#### èŠ‚æµï¼ˆThrottlingï¼‰ï¼š

èŠ‚æµæŠ€æœ¯ç¡®ä¿åœ¨ä¸€å®šæ—¶é—´å†…æ‰§è¡Œå‡½æ•°çš„é¢‘ç‡å—åˆ°é™åˆ¶ï¼Œæ— è®ºè§¦å‘é¢‘ç‡å¦‚ä½•ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªå‡½æ•°æ¯éš”ä¸€å®šæ—¶é—´æ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸ç®¡è§¦å‘äº‹ä»¶çš„é¢‘ç‡ã€‚èŠ‚æµé€šå¸¸ç”¨äºå‡å°‘äº‹ä»¶å¤„ç†çš„é¢‘ç‡ï¼Œä»¥é˜²æ­¢è¿‡å¤šçš„è®¡ç®—æˆ–è¯·æ±‚ã€‚

ç¤ºä¾‹ï¼ˆä½¿ç”¨ Node.js çš„ setInterval å‡½æ•°å®ç°èŠ‚æµï¼‰ï¼š

```js
function throttle(func, delay) {
  let canCall = true;
  return function (...args) {
    if (canCall) {
      func.apply(this, args);
      canCall = false;
      setTimeout(() => {
        canCall = true;
      }, delay);
    }
  };
}

const throttledFunction = throttle(() => {
  console.log('Throttled function called');
}, 1000);

// è°ƒç”¨throttledFunctionï¼Œä½†åªæœ‰åœ¨æ¯éš”1ç§’åæ‰èƒ½å†æ¬¡æ‰§è¡Œ
throttledFunction();
```

> æ— è®ºæ˜¯é˜²æŠ–è¿˜æ˜¯èŠ‚æµï¼Œéƒ½å¯ä»¥åœ¨ Node.js ä¸­ä½¿ç”¨ï¼Œä»¥é™åˆ¶å‡½æ•°è°ƒç”¨çš„é¢‘ç‡ï¼Œä»è€Œæ›´å¥½åœ°æ§åˆ¶èµ„æºçš„ä½¿ç”¨æˆ–äº‹ä»¶çš„è§¦å‘ã€‚è¿™äº›æŠ€æœ¯åœ¨å‰ç«¯å¼€å‘ä¸­ç»å¸¸ç”¨äºä¼˜åŒ–æ€§èƒ½å’Œæé«˜ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿå¯ä»¥åœ¨åç«¯åº”ç”¨ç¨‹åºä¸­å¤„ç†ç±»ä¼¼çš„æƒ…å†µã€‚

### 6. å¦‚ä½• åš http ç¼“å­˜

> HTTP ç¼“å­˜æ˜¯ä¸€ç§ç”¨äºæé«˜ç½‘ç«™æ€§èƒ½å’Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½çš„æŠ€æœ¯ã€‚é€šè¿‡å°†èµ„æºï¼ˆå¦‚ç½‘é¡µã€å›¾åƒã€æ ·å¼è¡¨å’Œè„šæœ¬ï¼‰ç¼“å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨æˆ–ä¸­é—´ä»£ç†æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥å‡å°‘é‡å¤çš„è¯·æ±‚ï¼Œä»è€ŒåŠ å¿«é¡µé¢åŠ è½½é€Ÿåº¦ã€‚ä»¥ä¸‹æ˜¯å®æ–½ HTTP ç¼“å­˜çš„ä¸€èˆ¬æ­¥éª¤ï¼š

1. è®¾ç½® HTTP å¤´éƒ¨ï¼š
   åœ¨ HTTP å“åº”å¤´éƒ¨ä¸­è®¾ç½®ç¼“å­˜ç›¸å…³çš„ HTTP å¤´éƒ¨æ˜¯å®æ–½ HTTP ç¼“å­˜çš„ç¬¬ä¸€æ­¥ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ HTTP å¤´éƒ¨ï¼š

```bash
Cache-Controlï¼šè¿™ä¸ªå¤´éƒ¨ç”¨äºæŒ‡å®šç¼“å­˜ç­–ç•¥ã€‚å¸¸è§çš„æŒ‡ä»¤åŒ…æ‹¬ï¼š
  max-age=<seconds>ï¼šå®šä¹‰èµ„æºåœ¨å®¢æˆ·ç«¯ç¼“å­˜ä¸­çš„æœ€å¤§å­˜æ´»æ—¶é—´ï¼ˆç§’ï¼‰ã€‚
  s-maxage=<seconds>ï¼šä¸max-ageç±»ä¼¼ï¼Œä½†ä»…é€‚ç”¨äºå…±äº«ç¼“å­˜ï¼ˆä¾‹å¦‚ä»£ç†æœåŠ¡å™¨ï¼‰ã€‚
  publicï¼šæŒ‡ç¤ºå“åº”å¯ä»¥è¢«ä»»ä½•ç¼“å­˜å­˜å‚¨ã€‚
  privateï¼šæŒ‡ç¤ºå“åº”åªèƒ½è¢«å•ä¸ªç”¨æˆ·çš„ç§æœ‰ç¼“å­˜å­˜å‚¨ã€‚
  no-storeï¼šç¦æ­¢ç¼“å­˜ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å¿…é¡»ä»æœåŠ¡å™¨è·å–æœ€æ–°èµ„æºã€‚
  no-cacheï¼šç¼“å­˜èµ„æºéœ€è¦ç»è¿‡é‡æ–°éªŒè¯ï¼Œå³éœ€è¦ä¸æœåŠ¡å™¨ç¡®è®¤èµ„æºæ˜¯å¦è¿‡æœŸã€‚
Expiresï¼šå®šä¹‰èµ„æºçš„è¿‡æœŸæ—¥æœŸï¼Œæ˜¯ä¸€ä¸ªHTTPæ—¥æœŸæ—¶é—´æ ¼å¼ã€‚
ETagï¼šç»™æ¯ä¸ªèµ„æºåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ŒæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨å®ƒæ¥éªŒè¯èµ„æºæ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚
Last-Modifiedï¼šèµ„æºçš„æœ€åä¿®æ”¹æ—¥æœŸï¼Œä¹Ÿç”¨äºéªŒè¯èµ„æºæ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚
```

### 7. TCP / UDP

|        | TCP                        | UDP            |
| ------ | -------------------------- | -------------- |
| å®‰å…¨æ€§ | å¯é æ€§                     | ä¸å¯é          |
| è¿æ¥   | æœ‰ï¼ŒåŒå‘ï¼Œæµæ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ | æ— è¿æ¥ï¼Œä½å¼€é”€ |
| é€‚ç”¨äº | å¯é æ€§è¦æ±‚é«˜               | å®æ—¶åº”ç”¨       |

### 8. ç®—æ³•é¢˜ç›®

1. æ±‚ x çš„ n æ¬¡æ–¹, ä¸èƒ½ç”¨ Math.pow(x,n)

```js
const pow = (x, n) => {
  if (n === 0) return 1;

  return x * pow(x, n - 1);
};
```

2. æ‰‹å†™ arr.flat() ,

```js
const arr = [
  [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9],
  ],
  [
    [11, 12, 13],
    [14, 15, 16],
    [17, 18, 19],
  ],
  [
    [21, 22, 23],
    [24, 25, 26],
    [27, 28, 29],
  ],
];

const myflat = (arr) => {
  let result = [];
  for (const each of arr) {
    if (Array.isArray(each)) result = result.concat(myflat(each));
    else result.push(each);
  }
  return result;
};

const flattenedArr = myflat(arr);
console.log(flattenedArr);
```
